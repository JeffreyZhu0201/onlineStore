<view class="container">
  <!-- 侧边分类栏 -->
  <view class="sidebar">
    <van-sidebar active-key="{{ activeCategory }}" bind:change="onCategoryChange">
      <van-sidebar-item 
        wx:for="{{ categories }}" 
        wx:key="id" 
        title="{{ item.name }}" 
      />
    </van-sidebar>
  </view>

  <!-- 商品列表 -->
  <view class="goods-container">
    <!-- 子分类标签 -->
    <scroll-view class="sub-category" scroll-x>
      <view class="sub-category-list">
        <view 
          wx:for="{{ subCategories }}" 
          wx:key="id"
          class="sub-category-item {{activeSubCategory === item.id ? 'active' : ''}}"
          bind:tap="onSubCategoryChange"
          data-id="{{ item.id }}"
        >
          {{ item.name }}
        </view>
      </view>
    </scroll-view>

    <!-- 商品列表 -->
    <scroll-view 
      class="goods-list" 
      scroll-y 
      refresher-enabled
      refresher-triggered="{{isRefreshing}}"
      bindrefresherrefresh="onRefresh"
      bindscrolltolower="onLoadMore"
    >
      <block wx:if="{{ goodsList.length > 0 }}">
        <van-card
          wx:for="{{ goodsList }}"
          wx:key="id"
          price="{{ item.price }}"
          desc="{{ item.desc }}"
          title="{{ item.title }}"
          thumb="{{ item.thumb }}"
          data-goods-id="{{ item.id }}"
          bind:tap="onGoodsTap"
          custom-class="goods-card"
        >
          <view slot="tags" class="goods-tags">
            <van-tag plain type="danger" wx:if="{{item.isNew}}">新品</van-tag>
            <van-tag plain type="warning" wx:if="{{item.isHot}}">热销</van-tag>
          </view>
        </van-card>
      </block>
      <block wx:else>
        <van-empty description="暂无商品" />
      </block>

      <!-- 加载状态 -->
      <view class="loading-status">
        <block wx:if="{{ hasMore }}">
          <van-loading size="24px">加载中...</van-loading>
        </block>
        <block wx:else>
          <view class="no-more">没有更多了</view>
        </block>
      </view>
    </scroll-view>
  </view>
</view> 